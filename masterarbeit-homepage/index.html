<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Hrbatovic Esad - Master Thesis Project - Solution</title>

    <style>
        /* Global Box-Sizing */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        /* Reset and Base Styles */
        body {
            font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding-top: 100px;
            /* Added padding to account for the fixed header */
            background: #f9f9f9;
            color: #333;
        }

        header {
            background: #293241;
            padding: 20px;
            color: #fff;
            position: fixed;
            /* Keeps the header fixed at the top */
            top: 0;
            left: 0;
            right: 0;
            height: 100px;
            /* Fixed height for the header */
            box-sizing: border-box;
            /* Includes padding in the height */
            z-index: 1001;
            /* Ensures the header stays above other elements */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            /* Subtle shadow for separation */
        }

        header h1 {
            margin: 0;
            font-size: 1.8rem;
            font-weight: 600;
            line-height: 40px;
            /* Vertically centers the text within the header */
        }

        header p {
            margin: 5px 0 0 0;
            color: #eee;
            font-size: 0.9rem;
            line-height: 20px;
        }

        /* Container Setup */
        .container {
            display: flex;
            min-height: calc(100vh - 100px);
            /* Full viewport height minus header */
            margin-top: 0;
            /* Removed margin-top */
        }

        /* Navbar (Service List) Styles */
        nav {
            background: #ffffff;
            border-right: 1px solid #ddd;
            padding: 20px;
            width: 300px;
            flex-shrink: 0;
            position: sticky;
            /* Keeps the navbar sticky during scroll */
            top: 100px;
            /* Positions the navbar below the fixed header */
            height: calc(100vh - 100px);
            /* Full height minus header */
            z-index: 1000;
            /* Ensures the navbar stays above main content */
            overflow-y: auto;
            /* Adds scroll if content overflows */
        }

        nav h2 {
            margin-top: 0;
            color: #293241;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .service-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .service-item {
            margin-bottom: 20px;
        }

        .service-item h3 {
            margin-bottom: 5px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #293241;
        }

        .service-item p {
            margin-top: 0;
            font-size: 0.9rem;
            line-height: 1.4;
            color: #555;
        }

        .service-item a {
            text-decoration: none;
            color: #0066cc;
            font-size: 0.9rem;
        }

        .service-item a:hover {
            text-decoration: underline;
        }

        .links {
            list-style-type: none;
            padding: 0;
            margin-top: 5px;
        }

        .links li {
            margin-right: 15px;
            display: inline-block;
        }

        /* Main Content Area */
        main {
            flex: 1;
            padding: 20px;
            /* Uniform padding */
            box-sizing: border-box;
            overflow: hidden;
            /* Prevents content overflow */
        }

        h2 {
            margin-top: 0;
            color: #293241;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            scroll-margin-top: 120px;
            /* Ensures h2 is fully visible below the header */
        }

        h3 {
            color: #293241;
            margin-top: 30px;
            margin-bottom: 10px;
        }

        .arch-image img {
            max-width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        /* General Typography */
        p {
            line-height: 1.6;
        }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            margin-bottom: 20px;
            table-layout: fixed;
            /* Ensures fixed table layout for consistent column widths */
        }

        table colgroup col {
            /* Default styles can be left empty if using <colgroup> for widths */
        }

        table th,
        table td {
            border: 1px solid #ddd;
            padding: 8px;
            vertical-align: top;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        table th {
            background-color: #f2f2f2;
            text-align: left;
        }

        table tr:nth-child(odd) {
            background-color: #ffffff;
            /* White background for odd rows */
        }

        table tr:nth-child(even) {
            background-color: #fafafa;
            /* Light gray for even rows */
        }

        table pre {
            margin: 0;
            font-family: "Courier New", Courier, monospace;
            background: #f0f0f0;
            padding: 8px;
            border-radius: 4px;
            overflow-x: auto;
            white-space: pre-wrap;
            /* Allows wrapping */
            word-wrap: break-word;
            /* Prevents overflow */
            /* Removed max-height and overflow to allow automatic height adjustment */
        }

        /* Basic Syntax Highlighting */
        table pre span.key {
            color: #d73a49;
        }

        table pre span.value {
            color: #005cc5;
        }

        table pre span.string {
            color: #032f62;
        }

        html {
            scroll-behavior: smooth;
        }

        /* Responsive Adjustments */
        @media (max-width: 900px) {
            .container {
                flex-direction: column;
                /* Removed margin-top:100px; since body has padding-top */
            }

            nav {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #ddd;
                position: static;
                /* Removes sticky positioning */
                top: 0;
                /* Resets top position */
                height: auto;
                /* Let height adjust based on content */
                overflow-y: visible;
                /* Remove scroll */
            }

            main {
                padding: 20px;
                /* Adjusted for smaller screens */
                margin-left: 0;
                /* Remove left margin if using fixed nav */
            }
        }

        /* Styling for inline code elements */
        .code-inline {
            font-family: "Courier New", Courier, monospace;
            background-color: #f4f4f4;
            color: #d63384;
            /* A nice magenta tone for differentiation */
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 0.9rem;
            white-space: nowrap;
            /* Prevent wrapping */
            border: 1px solid #e2e2e2;
            display: inline;
            vertical-align: middle;
            /* Keeps inline code aligned nicely with text */
        }

        /* Additional Responsive Styles for Tables */
        @media (max-width: 600px) {
            table {
                display: block;
                overflow-x: auto;
            }

            /* Adjust column widths if necessary */
            table col:nth-child(1) {
                width: 20%;
            }

            table col:nth-child(2) {
                width: 40%;
            }

            table col:nth-child(3) {
                width: 40%;
            }


        }
    </style>
</head>

<body>
    <header>
        <h1>E-Shop Proof of Concept - Technical Documentation</h1>
        <p>Hrbatovic Esad - Master Thesis Project</p>
    </header>

    <div class="container">
        <nav>
            <h2>Overview</h2>
            <ul class="service-list">
                <li class="service-item">
                    <h3><a href="#apigateway">ApiGateway</a></h3>
                    <p>Entry point for external requests</p>
                </li>
                <li class="service-item">
                    <h3><a href="#authservice">AuthService</a></h3>
                    <p>Authentication & Authorization</p>
                </li>
                <li class="service-item">
                    <h3><a href="#userservice">UserService</a></h3>
                    <p>Manage User Profiles</p>
                </li>
                <li class="service-item">
                    <h3><a href="#productservice">ProductService</a></h3>
                    <p>Digital Product Catalog</p>
                </li>
                <li class="service-item">
                    <h3><a href="#cartservice">CartService</a></h3>
                    <p>Shopping Cart Management</p>
                </li>
                <li class="service-item">
                    <h3><a href="#orderservice">OrderService</a></h3>
                    <p>Order Processing</p>
                </li>
                <li class="service-item">
                    <h3><a href="#paymentservice">PaymentService</a></h3>
                    <p>Payment Management</p>
                </li>
                <li class="service-item">
                    <h3><a href="#licenseservice">LicenseService</a></h3>
                    <p>Digital License Management</p>
                </li>
                <li class="service-item">
                    <h3><a href="#notificationservice">NotificationService</a></h3>
                    <p>User Notifications</p>
                </li>
                <li class="service-item">
                    <h3><a href="#trackingservice">TrackingService</a></h3>
                    <p>Event Tracking & Analytics</p>
                </li>
            </ul>

            <h2>Choreographies - Process Descriptions</h2>
            <ul class="service-list">
                <li class="service-item">
                    <h3><a href="#registeruser">Register user</a></h3>
                    <p>Event Tracking & Analytics</p>
                    <p>Flow Chart & Description of user registration</p>
                </li>
                <li class="service-item">
                    <h3><a href="#buyprocess">Buying process</a></h3>
                    <p>Flow Chart & Description of buying process</p>
                </li>
            </ul>

            <h2>Cross Cutting Concerns</h2>
            <ul class="service-list">
                <li class="service-item">
                    <h3><a href="#communication">Communication</a></h3>
                    <p>Messaging pattern</p>
                    <p>API Gateway</p>
                </li>
                <li class="service-item">
                    <h3><a href="#dbperservice">Persistence - CQRS pattern</a></h3>
                    <p>Database per service pattern</p>
                    <p>Command Query Responsibility Segregation</p>
                </li>
                <li class="service-item">
                    <h3><a href="#sagas">Distributed Transactions - Saga Pattern</a></h3>
                    <p>Handling of errors over microservices with database per service approach</p>
                </li>
                <li class="service-item">
                    <h3><a href="#security">Security</a></h3>
                    <p>Authentication & Authorization with JWT Tokens</p>
                    <p>Hashing</p>
                </li>
                <li class="service-item">
                    <h3><a href="#monitoring">Monitoring</a></h3>
                    <p>Tracability and monitoring of microservice processes</p>
                </li>
                <li class="service-item">
                    <h3><a href="#codegen">Code Generation - OpenApi</a></h3>
                    <p>Contract first approach with OpenApi specifications</p>
                </li>

            </ul>

        </nav>
        <main>
            <!-- introduction -->
            <section id="introduction">
                <h2>Introduction</h2>
                <p>
                    Integration of <strong>microservices</strong> can 
                    either follow an <strong>orchestration</strong> or <strong>choreography</strong> approach. Choreographies offer asynchronous communication, loose coupling and enhanced scalability. 
                    Due to their event-driven nature, they can achieve <strong>eventual consistency</strong> without a centralized controller. This allows systems to better
                    manage traffic spikes and maintain functionality even if individual services fail. Additionally,
                    this approach supports agile development by allowing teams to work concurrently and independently on
                    different services, which results in flexible and resilient products without single points of failure.
                </p>
                <p>
                    <strong>Java</strong> remains one of the most widely used programming languages, making it very relevant for
                    microservice architectures. Its popularity and broad tool support make it a preferred choice for
                    many organizations. Recently, alternative Java frameworks and runtimes like <strong>Quarkus</strong>, <strong>Micronaut</strong>, and
                    <strong>Spring Boot</strong> have emerged, specifically designed to meet the demands of <strong>cloud-native</strong> applications
                    with improvements in performance optimization, resource utilization, and startup speed.
                </p>
                <p>
                    A key focus of this work is the comparison between <strong>JVM-based</strong> and <strong>native Java</strong> service implementations
                    using <strong>GraalVM</strong>. GraalVM’s <strong>Ahead-Of-Time (AOT) compilation</strong> promises faster startup times and reduced
                    memory consumption, which are essential for distributed and cloud-native systems. Up unitl recently, 
                    <strong>serverless functions</strong> and java applications were not a great match due to the JVM warm-up time.  
                    It can usually be attributed to lazy class loading and <strong>just-in-time compilation</strong>, which optimize the JVM for subsequent requests.
                    However with GraalVM on the playing field and its AOT compilation capabilities, Java became a viable option.
                    Limitations exist, especially due to the fact that the JVM works with reflection.
                    Java native executables needs to know ahead-of-time the reflectively accessed program elements.
                    GraalVM tries to resolve the target elements through a static analysis that detects calls to the Reflection API. Where the analysis fails, 
                    the program elements reflectively accessed at run time must be specified using a manual configuration. 
                </p>
                <p>
                    This study evaluates which of the three leading Java frameworks—Quarkus, Micronaut, and Spring
                    Boot performs best in a microservice choreography under realistic conditions concerning
                    startup time, throughput, data propagation times, as well as CPU- and memory usage. By examining necessary adjustments, design patterns and existing
                    limitations with GraalVM, the research aims to provide valuable insights for developers and architects. The objective is to assist in making informed decisions 
                    for implementing cost-effective and high-performance cloud-native / servlerless solutions with java, demonstrated through a digital goods e-shop
                    application.
                </p>
            </section>

            <h2>High Level Architecture</h2>
            <p>
                
            The following section, provides insights into each of the services, describing their APIs using interactive OpenApi specifications, database schemas and outgoing events.
            </p>
            <div class="arch-image">
                <img src="images/architecture-diagram.jpg" alt="High-Level Architecture Diagram">
            </div>


            <!-- ApiGateway Section -->
            <h2 id="apigateway">ApiGateway</h2>
            <p>Entry point for external requests</p>
            <ul class="links">
                <li><a href="service-specs/apigateway//openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/apigateway//openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>


            <!-- AuthService Section -->
            <h2 id="authservice">AuthService</h2>
            <p>Handles authentication and authorization: login, logout, and token management.</p>
            <ul class="links">
                <li><a href="service-specs/authservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/authservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>
            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Registrations Collection -->
                    <tr>
                        <td>registrations</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>,
    <span class="key">userEntity</span>: <span class="key">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">firstName</span>: <span class="value">string</span>,
        <span class="key">lastName</span>: <span class="value">string</span>,
        <span class="key">role</span>: <span class="value">string</span>
    <span class="key">}</span>,
    <span class="key">credentialsEntity</span>: <span class="key">{</span>
        <span class="key">email</span>: <span class="value">string</span>,
        <span class="key">password</span>: <span class="value">string</span>
    <span class="key">}</span>
    <span class="key">createdAt</span>: <span class="value">Date</span>,
    <span class="key">updatedAt</span>: <span class="value">Date</span>
<span class="key">}</span>
        </pre>
                        </td>
                        <td>Stores user registration information, including user details and credentials.</td>
                    </tr>

                </tbody>
            </table>
            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- UserRegisteredEvent -->
                    <tr>
                        <td>UserRegisteredEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">userPayload</span>: <span class="key">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">firstName</span>: <span class="value">string</span>,
        <span class="key">lastName</span>: <span class="value">string</span>,
        <span class="key">role</span>: <span class="value">string</span>,
        <span class="key">email</span>: <span class="value">string</span>,
        <span class="key">phoneNumber</span>: <span class="value">string</span>,
        <span class="key">address</span>: <span class="key">{</span>
            <span class="key">street</span>: <span class="value">string</span>,
            <span class="key">city</span>: <span class="value">string</span>,
            <span class="key">state</span>: <span class="value">string</span>,
            <span class="key">postalCode</span>: <span class="value">string</span>,
            <span class="key">country</span>: <span class="value">string</span>
        <span class="key">}</span>
    <span class="key">}</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"authservice"</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
        </pre>
                        </td>
                        <td>Emitted when a new user registers.</td>
                    </tr>

                    <!-- UserCredentialsUpdatedEvent -->
                    <tr>
                        <td>UserCredentialsUpdatedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>,
    <span class="key">email</span>: <span class="value">string</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"authservice"</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a user's credentials are updated.</td>
                    </tr>
                </tbody>
            </table>

            <!-- UserService Section -->
            <h2 id="userservice">UserService</h2>
            <p>Manages user profiles, registration, and account updates.</p>
            <ul class="links">
                <li><a href="service-specs/userservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/userservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>

            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Users Collection -->
                    <tr>
                        <td>users</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">_id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">firstName</span>: <span class="value">string</span>, <!-- User's First Name -->
    <span class="key">lastName</span>: <span class="value">string</span>, <!-- User's Last Name -->
    <span class="key">role</span>: <span class="value">string</span>, <!-- User's Role (e.g., "admin", "customer") -->
    <span class="key">email</span>: <span class="value">string</span>, <!-- User's Email Address -->
    <span class="key">phoneNumber</span>: <span class="value">string</span>, <!-- User's Phone Number -->
    <span class="key">address</span>: <span class="key">{</span>
        <span class="key">street</span>: <span class="value">string</span>, <!-- Street Address -->
        <span class="key">city</span>: <span class="value">string</span>, <!-- City -->
        <span class="key">state</span>: <span class="value">string</span>, <!-- State -->
        <span class="key">postalCode</span>: <span class="value">string</span>, <!-- Postal Code -->
        <span class="key">country</span>: <span class="value">string</span> <!-- Country -->
    <span class="key">}</span>,
    <span class="key">createdAt</span>: <span class="value">Date</span>, <!-- Account Creation Timestamp -->
    <span class="key">updatedAt</span>: <span class="value">Date</span> <!-- Last Update Timestamp -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores user profile information and contact details.</td>
                    </tr>
                </tbody>
            </table>
            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- UserUpdatedEvent -->
                    <tr>
                        <td>UserUpdatedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">userPayload</span>: <span class="key">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">firstName</span>: <span class="value">string</span>,
        <span class="key">lastName</span>: <span class="value">string</span>,
        <span class="key">role</span>: <span class="value">string</span>,
        <span class="key">email</span>: <span class="value">string</span>,
        <span class="key">phoneNumber</span>: <span class="value">string</span>,
        <span class="key">address</span>: <span class="key">{</span>
            <span class="key">street</span>: <span class="value">string</span>,
            <span class="key">city</span>: <span class="value">string</span>,
            <span class="key">state</span>: <span class="value">string</span>,
            <span class="key">postalCode</span>: <span class="value">string</span>,
            <span class="key">country</span>: <span class="value">string</span>
        <span class="key">}</span>
    <span class="key">}</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"userservice"</span>
    <span class="key">requestCorrelationId</span>: <span class="value">"UUID"</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a user updates their profile.</td>
                    </tr>
                </tbody>
            </table>

            <!-- ProductService Section -->
            <h2 id="productservice">ProductService</h2>
            <p>Manages digital product catalog: creation, updating, and deletion of products.</p>
            <ul class="links">
                <li><a href="service-specs/productservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/productservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>

            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Products Collection -->
                    <tr>
                        <td>products</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">title</span>: <span class="value">string</span>, <!-- Product Title -->
    <span class="key">description</span>: <span class="value">string</span>, <!-- Product Description -->
    <span class="key">categoryId</span>: <span class="value">UUID</span>, <!-- Reference to Category -->
    <span class="key">price</span>: <span class="value">BigDecimal</span>, <!-- Product Price -->
    <span class="key">currency</span>: <span class="value">string</span>, <!-- Currency Code -->
    <span class="key">imageUrl</span>: <span class="value">string</span>, <!-- Image URL -->
    <span class="key">licenseAvailable</span>: <span class="value">boolean</span>, <!-- License Availability -->
    <span class="key">deleted</span>: <span class="value">boolean</span>, <!-- Soft Delete Flag -->
    <span class="key">tags</span>: <span class="value">[string]</span>, <!-- Product Tags -->
    <span class="key">createdAt</span>: <span class="value">Date</span>, <!-- Creation Timestamp -->
    <span class="key">updatedAt</span>: <span class="value">Date</span> <!-- Last Update Timestamp -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores product details and metadata.</td>
                    </tr>
                    <!-- Categories Collection -->
                    <tr>
                        <td>categories</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">name</span>: <span class="value">string</span>, <!-- Category Name -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores product category information.</td>
                    </tr>
                    <!-- Users Collection -->
                    <tr>
                        <td>users</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">role</span>: <span class="value">string</span>, <!-- User Role (e.g., "admin", "seller") -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores user roles and related information within ProductService.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- ProductCreatedEvent -->
                    <tr>
                        <td>ProductCreatedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">product</span>: <span class="key">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">title</span>: <span class="value">string</span>,
        <span class="key">description</span>: <span class="value">string</span>,
        <span class="key">categoryId</span>: <span class="value">UUID</span>,
        <span class="key">price</span>: <span class="value">BigDecimal</span>,
        <span class="key">currency</span>: <span class="value">string</span>,
        <span class="key">imageUrl</span>: <span class="value">string</span>,
        <span class="key">licenseAvailable</span>: <span class="value">boolean</span>,
        <span class="key">deleted</span>: <span class="value">boolean</span>,
        <span class="key">tags</span>: <span class="value">[string]</span>,
        <span class="key">createdAt</span>: <span class="value">LocalDateTime</span>,
        <span class="key">updatedAt</span>: <span class="value">LocalDateTime</span>
    <span class="key">}</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"productservice"</span>
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a new product is created.</td>
                    </tr>
                    <!-- ProductUpdatedEvent -->
                    <tr>
                        <td>ProductUpdatedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">product</span>: <span class="key">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">title</span>: <span class="value">string</span>,
        <span class="key">description</span>: <span class="value">string</span>,
        <span class="key">categoryId</span>: <span class="value">UUID</span>,
        <span class="key">price</span>: <span class="value">BigDecimal</span>,
        <span class="key">currency</span>: <span class="value">string</span>,
        <span class="key">imageUrl</span>: <span class="value">string</span>,
        <span class="key">licenseAvailable</span>: <span class="value">boolean</span>,
        <span class="key">deleted</span>: <span class="value">boolean</span>,
        <span class="key">tags</span>: <span class="value">[string]</span>,
        <span class="key">createdAt</span>: <span class="value">LocalDateTime</span>,
        <span class="key">updatedAt</span>: <span class="value">LocalDateTime</span>
    <span class="key">}</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"productservice"</span>
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a product is updated.</td>
                    </tr>
                </tbody>
            </table>

            <!-- CartService Section -->
            <h2 id="cartservice">CartService</h2>
            <p>Allows users to add items to the cart, view, modify, delete items, and proceed to checkout.</p>
            <ul class="links">
                <li><a href="service-specs/cartservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/cartservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>

            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Users Collection -->
                    <tr>
                        <td>users</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">_id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">role</span>: <span class="value">string</span>, <!-- User Role (e.g., "admin", "seller") -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores user roles and related information within CartService.</td>
                    </tr>
                    <!-- Products Collection -->
                    <tr>
                        <td>products</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">title</span>: <span class="value">string</span>, <!-- Product Title -->
    <span class="key">price</span>: <span class="value">BigDecimal</span>, <!-- Product Price -->
    <span class="key">currency</span>: <span class="value">string</span>, <!-- Currency Code -->
    <span class="key">licenseAvailable</span>: <span class="value">boolean</span>, <!-- License Availability -->
    <span class="key">deleted</span>: <span class="value">boolean</span> <!-- Soft Delete Flag -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores product details relevant to the CartService.</td>
                    </tr>
                    <!-- Carts Collection -->
                    <tr>
                        <td>carts</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">userId</span>: <span class="value">UUID</span>, <!-- Reference to User -->
    <span class="key">cartProducts</span>: <span class="key">[</span>
        <span class="key">{</span>
            <span class="key">productId</span>: <span class="value">UUID</span>, <!-- Reference to Product -->
            <span class="key">productTitle</span>: <span class="value">string</span>, <!-- Product Title -->
            <span class="key">quantity</span>: <span class="value">Integer</span>, <!-- Quantity of Product -->
            <span class="key">productPrice</span>: <span class="value">BigDecimal</span>, <!-- Price per Unit -->
            <span class="key">totalPrice</span>: <span class="value">BigDecimal</span> <!-- Total Price for this Item -->
        <span class="key">}</span>
    <span class="key">]</span>,
    <span class="key">totalItems</span>: <span class="value">Integer</span>, <!-- Total Number of Items -->
    <span class="key">totalPrice</span>: <span class="value">BigDecimal</span> <!-- Total Price of the Cart -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores user shopping cart details.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- CheckoutStartedEvent -->
                    <tr>
                        <td>CheckoutStartedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">cart</span>: <span class="value">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">userId</span>: <span class="value">UUID</span>,
        <span class="key">cartProducts</span>: <span class="value">[</span>
            <span class="key">{</span>
                <span class="key">productId</span>: <span class="value">UUID</span>,
                <span class="key">productTitle</span>: <span class="value">string</span>,
                <span class="key">quantity</span>: <span class="value">Integer</span>,
                <span class="key">productPrice</span>: <span class="value">BigDecimal</span>,
                <span class="key">totalPrice</span>: <span class="value">BigDecimal</span>
            <span class="key">}</span>
        <span class="value">]</span>,
        <span class="key">totalItems</span>: <span class="value">Integer</span>,
        <span class="key">totalPrice</span>: <span class="value">BigDecimal</span>
    <span class="key">}</span>,
    <span class="key">paymentMethod</span>: <span class="value">string</span>,
    <span class="key">paymentToken</span>: <span class="value">UUID</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"cartservice"</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a user starts the checkout process.</td>
                    </tr>
                </tbody>
            </table>

            <!-- OrderService Section -->
            <h2 id="orderservice">OrderService</h2>
            <p>Processes orders, maintains order status, and provides order details.</p>
            <ul class="links">
                <li><a href="service-specs/orderservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/orderservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>

            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Users Collection -->
                    <tr>
                        <td>users</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">role</span>: <span class="value">string</span>, <!-- User Role (e.g., "admin", "seller") -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores user roles and related information within OrderService.</td>
                    </tr>
                    <!-- Orders Collection -->
                    <tr>
                        <td>orders</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">userId</span>: <span class="value">UUID</span>, <!-- Reference to User -->
    <span class="key">status</span>: <span class="value">string</span>, <!-- Order Status (e.g., "pending", "shipped") -->
    <span class="key">statusDetail</span>: <span class="value">string</span>, <!-- Detailed Status Information -->
    <span class="key">currency</span>: <span class="value">string</span>, <!-- Currency Code -->
    <span class="key">totalAmount</span>: <span class="value">BigDecimal</span>, <!-- Total Order Amount -->
    <span class="key">createdAt</span>: <span class="value">Date</span>, <!-- Creation Timestamp -->
    <span class="key">updatedAt</span>: <span class="value">Date</span>, <!-- Last Update Timestamp -->
    <span class="key">paymenToken</span>: <span class="value">UUID</span>, <!-- Payment Token -->
    <span class="key">paymentMethod</span>: <span class="value">string</span>, <!-- Payment Method (e.g., "credit_card") -->
    <span class="key">orderItems</span>: <span class="key">[</span>
        <span class="key">{</span>
            <span class="key">productId</span>: <span class="value">UUID</span>, <!-- Reference to Product -->
            <span class="key">productTitle</span>: <span class="value">string</span>, <!-- Product Title -->
            <span class="key">quantity</span>: <span class="value">Integer</span>, <!-- Quantity of Product -->
            <span class="key">productPrice</span>: <span class="value">BigDecimal</span>, <!-- Price per Unit -->
            <span class="key">totalPrice</span>: <span class="value">BigDecimal</span> <!-- Total Price for this Item -->
        <span class="key">}</span>
    <span class="value">]</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores order details and status.</td>
                    </tr>

                </tbody>
            </table>

            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- OrderCreatedEvent -->
                    <tr>
                        <td>OrderCreatedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">order</span>: <span class="key">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">userId</span>: <span class="value">UUID</span>,
        <span class="key">status</span>: <span class="value">string</span>,
        <span class="key">currency</span>: <span class="value">string</span>,
        <span class="key">totalAmount</span>: <span class="value">BigDecimal</span>,
        <span class="key">createdAt</span>: <span class="value">LocalDateTime</span>,
        <span class="key">updatedAt</span>: <span class="value">LocalDateTime</span>,
        <span class="key">paymenToken</span>: <span class="value">UUID</span>,
        <span class="key">paymentMethod</span>: <span class="value">string</span>,
        <span class="key">orderItems</span>: <span class="value">[</span>
            <span class="key">{</span>
                <span class="key">productId</span>: <span class="value">UUID</span>,
                <span class="key">productTitle</span>: <span class="value">string</span>,
                <span class="key">quantity</span>: <span class="value">Integer</span>,
                <span class="key">productPrice</span>: <span class="value">BigDecimal</span>,
                <span class="key">totalPrice</span>: <span class="value">BigDecimal</span>
            <span class="key">}</span>
        <span class="value">]</span>
    <span class="key">}</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"orderservice"</span>
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a new order is created.</td>
                    </tr>

                </tbody>
            </table>

            <!-- PaymentService Section -->
            <h2 id="paymentservice">PaymentService</h2>
            <p>Handles payment processing, manages payment methods, and maintains transaction records.</p>
            <ul class="links">
                <li><a href="service-specs/paymentservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/paymentservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>

            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Users Collection -->
                    <tr>
                        <td>users</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">role</span>: <span class="value">string</span> <!-- User Role (e.g., "admin", "seller") -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores user roles and related information within PaymentService.</td>
                    </tr>
                    <!-- payment-methods Collection -->
                    <tr>
                        <td>payment-methods</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">selector</span>: <span class="value">string</span>, <!-- Selector for Payment Method (e.g., "credit_card") -->
    <span class="key">name</span>: <span class="value">string</span>, <!-- Name of the Payment Method -->
    <span class="key">description</span>: <span class="value">string</span>, <!-- Description of the Payment Method -->
    <span class="key">active</span>: <span class="value">boolean</span>, <!-- Indicates if the Payment Method is active -->
    <span class="key">iconUrl</span>: <span class="value">string</span>, <!-- URL to the Payment Method Icon -->
    <span class="key">paymentGatewayUrl</span>: <span class="value">string</span>, <!-- URL of the Payment Gateway -->
    <span class="key">merchantId</span>: <span class="value">string</span>, <!-- Merchant ID for the Payment Gateway -->
    <span class="key">merchantSecret</span>: <span class="value">string</span>, <!-- Merchant Secret for the Payment Gateway -->
    <span class="key">createdAt</span>: <span class="value">Date</span>, <!-- Creation Timestamp -->
    <span class="key">updatedAt</span>: <span class="value">Date</span> <!-- Last Update Timestamp -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores details of available payment methods.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- PaymentSuccessEvent -->
                    <tr>
                        <td>PaymentSuccessEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">paymentPayload</span>: <span class="key">{</span>
        <span class="key">userId</span>: <span class="value">UUID</span>,
        <span class="key">orderId</span>: <span class="value">UUID</span>,
        <span class="key">paidItemPayloads</span>: <span class="key">[</span>
            <span class="key">{</span>
                <span class="key">productId</span>: <span class="value">UUID</span>,
                <span class="key">productTitle</span>: <span class="value">string</span>,
                <span class="key">quantity</span>: <span class="value">Integer</span>
            <span class="key">}</span>
        <span class="value">]</span>
    <span class="key">}</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"paymentservice"</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a payment is successfully processed.</td>
                    </tr>
                    <!-- PaymentFailEvent -->
                    <tr>
                        <td>PaymentFailEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">paymentPayload</span>: <span class="key">{</span>
        <span class="key">userId</span>: <span class="value">UUID</span>,
        <span class="key">orderId</span>: <span class="value">UUID</span>,
        <span class="key">paidItemPayloads</span>: <span class="key">[</span>
            <span class="key">{</span>
                <span class="key">productId</span>: <span class="value">UUID</span>,
                <span class="key">productTitle</span>: <span class="value">string</span>,
                <span class="key">quantity</span>: <span class="value">Integer</span>
            <span class="key">}</span>
        <span class="value">]</span>
    <span class="key">}</span>,
    <span class="key">message</span>: <span class="value">string</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"paymentservice"</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a payment fails to process.</td>
                    </tr>
                </tbody>
            </table>

            <!-- LicenseService Section -->
            <h2 id="licenseservice">LicenseService</h2>
            <p>Manages digital license generation, templates, and license distribution.</p>
            <ul class="links">
                <li><a href="service-specs/licenseservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/licenseservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>

            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Users Collection -->
                    <tr>
                        <td>users</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">role</span>: <span class="value">string</span> <!-- User Role (e.g., "admin", "seller") -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores user roles and related information within LicenseService.</td>
                    </tr>
                    <!-- license-templates Collection -->
                    <tr>
                        <td>license-templates</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">productId</span>: <span class="value">UUID</span>, <!-- Reference to Product -->
    <span class="key">licenseDuration</span>: <span class="value">Integer</span>, <!-- Default License Duration in Days -->
    <span class="key">createdAt</span>: <span class="value">Date</span>, <!-- Template Creation Timestamp -->
    <span class="key">updatedAt</span>: <span class="value">Date</span> <!-- Template Last Update Timestamp -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Defines templates for different license types associated with products.</td>
                    </tr>
                    <!-- licenses Collection -->
                    <tr>
                        <td>licenses</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">serialNumber</span>: <span class="value">UUID</span>, <!-- Unique License Serial Number -->
    <span class="key">productId</span>: <span class="value">UUID</span>, <!-- Reference to Product -->
    <span class="key">productTitle</span>: <span class="value">string</span>, <!-- Title of Product -->
    <span class="key">userId</span>: <span class="value">UUID</span>, <!-- Reference to User -->
    <span class="key">orderId</span>: <span class="value">UUID</span>, <!-- Reference to Order -->
    <span class="key">licenseDuration</span>: <span class="value">Integer</span>, <!-- Duration of the License in Days -->
    <span class="key">issuedAt</span>: <span class="value">Date</span>, <!-- License Issuance Timestamp -->
    <span class="key">expiresAt</span>: <span class="value">Date</span>, <!-- License Expiration Timestamp -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores license details issued to users.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- LicensesGeneratedEvent -->
                    <tr>
                        <td>LicensesGeneratedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">orderId</span>: <span class="value">UUID</span>,
    <span class="key">licenses</span>: <span class="key">[</span>
        <span class="key">{</span>
            <span class="key">serialNumber</span>: <span class="value">UUID</span>,
            <span class="key">productId</span>: <span class="value">UUID</span>,
            <span class="key">userId</span>: <span class="value">UUID</span>,
            <span class="key">orderId</span>: <span class="value">UUID</span>,
            <span class="key">licenseDuration</span>: <span class="value">Integer</span>,
            <span class="key">issuedAt</span>: <span class="value">LocalDateTime</span>,
            <span class="key">expiresAt</span>: <span class="value">LocalDateTime</span>
        <span class="key">}</span>
    <span class="key">]</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"licenseservice"</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when licenses are generated for an order.</td>
                    </tr>
                    <!-- LicenseTemplateCreatedEvent -->
                    <tr>
                        <td>LicenseTemplateCreatedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">licenseTemplate</span>: <span class="value">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">productId</span>: <span class="value">UUID</span>,
        <span class="key">licenseDuration</span>: <span class="value">Integer</span>,
        <span class="key">createdAt</span>: <span class="value">LocalDateTime</span>,
        <span class="key">updatedAt</span>: <span class="value">LocalDateTime</span>
    <span class="key">}</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"licenseservice"</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a new license template is created.</td>
                    </tr>
                    <!-- LicenseTemplateUpdatedEvent -->
                    <tr>
                        <td>LicenseTemplateUpdatedEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">licenseTemplate</span>: <span class="key">{</span>
        <span class="key">id</span>: <span class="value">UUID</span>,
        <span class="key">productId</span>: <span class="value">UUID</span>,
        <span class="key">licenseDuration</span>: <span class="value">Integer</span>,
        <span class="key">createdAt</span>: <span class="value">LocalDateTime</span>,
        <span class="key">updatedAt</span>: <span class="value">LocalDateTime</span>
    <span class="key">}</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"licenseservice"</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when a license template is updated.</td>
                    </tr>
                </tbody>
            </table>


            <!-- NotificationService Section -->
            <h2 id="notificationservice">NotificationService</h2>
            <p>Handles sending notifications to users regarding their orders and other relevant activities.</p>
            <ul class="links">
                <li><a href="service-specs/notificationservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/notificationservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>

            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Users Collection -->
                    <tr>
                        <td>users</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">role</span>: <span class="value">string</span>, <!-- User Role (e.g., "admin", "user") -->
    <span class="key">email</span>: <span class="value">string</span>, <!-- User Email Address -->
    <span class="key">firstName</span>: <span class="value">string</span>, <!-- User First Name -->
    <span class="key">lastName</span>: <span class="value">string</span> <!-- User Last Name -->
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores user roles and personal information within NotificationService.</td>
                    </tr>
                </tbody>
            </table>
            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- OrderNotificationSentEvent -->
                    <tr>
                        <td>OrderNotificationSentEvent</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">orderId</span>: <span class="value">UUID</span>,
    <span class="key">timestamp</span>: <span class="value">LocalDateTime</span>,
    <span class="key">sessionId</span>: <span class="value">UUID</span>,
    <span class="key">userId</span>: <span class="value">UUID</span>,
    <span class="key">userEmail</span>: <span class="value">string</span>,
    <span class="key">sourceService</span>: <span class="value">"notificationservice"</span>,
    <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Emitted when an order notification is sent to the user.</td>
                    </tr>
                </tbody>
            </table>

            <!-- TrackingService Section -->
            <h2 id="trackingservice">TrackingService</h2>
            <p>Monitors and records various events within the system, providing insights and analytics on user
                interactions and system operations.</p>
            <ul class="links">
                <li><a href="service-specs/trackingservice/openapi.html" target="_blank">API Documentation</a></li>
                <li><a href="service-specs/trackingservice/openapi.yaml" target="_blank">OpenAPI YAML</a></li>
            </ul>

            <h3>Database Schemas</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Collection Name</th>
                        <th>Schema</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- events Collection -->
                    <tr>
                        <td>events</td>
                        <td>
                            <pre>
<span class="key">{</span>
    <span class="key">id</span>: <span class="value">UUID</span>, <!-- Unique Identifier -->
    <span class="key">eventType</span>: <span class="value">string</span>, <!-- Type of the Event (e.g., "login", "purchase") -->
    <span class="key">body</span>: <span class="value">string</span>, <!-- Event Payload or Details -->
    <span class="key">metadata</span>: <span class="key">{
        <span class="key">userId</span>: <span class="value">UUID</span>, <!-- Reference to User -->
        <span class="key">productId</span>: <span class="value">UUID</span>, <!-- Reference to Product -->
        <span class="key">orderId</span>: <span class="value">UUID</span>, <!-- Reference to Order -->
        <span class="key">userMail</span>: <span class="value">string</span>, <!-- User's Email Address -->
        <span class="key">sessionId</span>: <span class="value">UUID</span>, <!-- Session Identifier -->
        <span class="key">sourceService</span>: <span class="value">string</span>, <!-- Originating Service (e.g., "cartservice") -->
        <span class="key">requestCorrelationId</span>: <span class="value">UUID</span>, <!-- Reference to Order -->
        <span class="key">timestamp</span>: <span class="value">Date</span> <!-- Event Timestamp -->
    <span class="key">}</span>
<span class="key">}</span>
                            </pre>
                        </td>
                        <td>Stores tracking events generated by various services within the system.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Outgoing Events</h3>
            <table>
                <colgroup>
                    <col style="width: 15%;">
                    <col style="width: 50%;">
                    <col style="width: 35%;">
                </colgroup>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Definition</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- No Outgoing Events Defined -->
                    <tr>
                        <td colspan="3">No outgoing events are defined for TrackingService.</td>
                    </tr>
                </tbody>
            </table>

            <h1>Process descriptions - Choreographies</h1>
            <section>
                <h2 id="registeruser">Register user</h2>
                <div class="arch-image">
                    <img src="images/register-user.jpg" alt="register user process">
                </div>

                <p>
                    The <strong>user registration process</strong> consists of the following steps:
                </p>
                <ol>
                    <li>The <strong>client</strong> sends a <code class="code-inline">POST /auth/register</code> request
                        to the
                        <strong>ApiGateway</strong>, initiating the user registration process.
                    </li>
                    <li>The <strong>ApiGateway</strong> forwards the request to the <strong>AuthService</strong> for
                        processing.</li>
                    <li>The <strong>AuthService</strong> immediately responds to the <strong>ApiGateway</strong> and the
                        <strong>client</strong> with a JWT token after successfuly storing the user's
                        credentials.
                    </li>
                    <li>After the <strong>AuthService</strong> saves the user registration data in the <strong>MongoDB
                            authdb</strong> it emits a <code class="code-inline">UserRegisteredEvent</code> to
                        <strong>Kafka</strong>.
                    </li>
                    <li>The <strong>Kafka</strong> message broker propagates the <code
                            class="code-inline">UserRegisteredEvent</code> to
                        subscribing services.</li>
                    <li>The <strong>UserService</strong> and all other services consume the
                        <code class="code-inline">UserRegisteredEvent</code>, processes the event, and save
                        user-specific information they
                        to the <strong>MongoDB userdb</strong> Mainly the user's role and id for validation purposes.
                    </li>
                    <li>Simultaneously, the <strong>TrackingService</strong> consumes the
                        <code class="code-inline">UserRegisteredEvent</code> and records an event log in the
                        <strong>MongoDB
                            trackingdb</strong> for analytics and tracking purposes.
                    </li>
                </ol>
            </section>

            <section>
                <h2 id="buyprocess">Buying process</h2>
                <div class="arch-image">
                    <img src="images/buy-process.jpg" alt="buy process">
                </div>

                <p>
                    The <strong>buying process</strong> consists of the following steps:
                </p>
                <ol>
                    <li>The <strong>Client</strong> sends a <code
                            class="code-inline">POST /cart-products/checkout</code> request
                        to the <strong>ApiGateway</strong>, initiating the checkout process.</li>
                    <li>The <strong>ApiGateway</strong> forwards the request to the <strong>CartService</strong></li>
                    </li>
                    <li>The <strong>CartService</strong> reads the cart data from the <strong>MongoDB cartdb</strong>
                        generates an order id and returns the order id to the <strong>Client</strong> through the
                        <strong>ApiGateway</strong>
                    </li>
                    <li>The <strong>CartService</strong> generates a <code
                            class="code-inline">CheckoutStartedEvent</code> and publishes it through
                        <strong>Kafka</strong>,</li>
                    </li>
                    <li>The <strong>OrderService</strong> consumes the <code
                            class="code-inline">CheckoutStartedEvent</code>, creates an order with a status of
                        <strong>"OPEN"</strong>, saves it to the <strong>MongoDB orderdb</strong>, and emits an <code
                            class="code-inline">OrderCreatedEvent</code>.
                    </li>
                    <li>The <strong>CartService</strong> consumes the <code class="code-inline">OrderCreatedEvent</code>
                        and deletes the corresponding cart from the db, since the order is now pending and the cart is
                        no longer needed</code>.</li>
                    <li>The <strong>PaymentService</strong> consumes the <code
                            class="code-inline">OrderCreatedEvent</code>, validates the payment method, processes the
                        payment, and emits a <code class="code-inline">PaymentSuccessEvent</code>.</li>
                    <li>The <strong>OrderService</strong> consumes the <code
                            class="code-inline">PaymentSuccessEvent</code> to update the order status to
                        <strong>"PAYMENT_SUCCESS"</strong>.
                    </li>
                    <li>The <strong>LicenseService</strong> consumes the <code
                            class="code-inline">PaymentSuccessEvent</code>, searches for license templates in the
                        <strong>MongoDB licensedb</strong>, generates the licenses, stores them, and emits a <code
                            class="code-inline">LicensesGeneratedEvent</code>.
                    </li>
                    <li>The <strong>OrderService</strong> consumes the <code
                            class="code-inline">LicensesGeneratedEvent</code> to update the order status to
                        <strong>"LICENSES_GENERATED"</strong>.
                    </li>
                    <li>The <strong>NotificationService</strong> consumes the <code
                            class="code-inline">LicensesGeneratedEvent</code>, queries user data (email and name) from
                        its database, builds an email notification with the generated licenses, and emits a <code
                            class="code-inline">NotificationSentEvent</code>.</li>
                    <li>The <strong>NotificationService</strong> interacts with an <strong>external mail server</strong>
                        to send the email to the user with the licenses attached.</li>
                    <li>The <strong>OrderService</strong> consumes the <code
                            class="code-inline">NotificationSentEvent</code> to update the order status to
                        <strong>"COMPLETED"</strong>.
                    </li>
                    <li>Throughout the process, the <strong>TrackingService</strong> consumes all events (<code
                            class="code-inline">CheckoutStartedEvent</code>, <code
                            class="code-inline">OrderCreatedEvent</code>, <code
                            class="code-inline">PaymentSuccessEvent</code>, <code
                            class="code-inline">LicensesGeneratedEvent</code>, and <code
                            class="code-inline">NotificationSentEvent</code>) and logs them to the <strong>MongoDB
                            trackingdb</strong> for analytics and auditing purposes.</li>
                </ol>
            </section>

            <h1>Cross Cutting Concerns and Design Patterns</h1>
            <section>
                <h2 id="communication">Communication</h2>
                <h3>Messaging</h3>
                <p>
                    The <strong>Messaging</strong> pattern enables asynchronous communication between services by
                    exchanging events through a message broker, such as <strong>Apache Kafka</strong>. In this
                    architecture, services emit events, like <code class="code-inline">UserRegisteredEvent</code> or
                    <code class="code-inline">PaymentFailEvent</code>, which other services consume independently. This
                    decouples services, keeps them autonomous and each service can handle messages at their own pace.
                </p>
                <p>
                    Messaging is essential for implementing choreographies, which allows for distributed transactions
                    and eventual consistency while avoiding direct service-to-service dependencies or a central
                    orchestrator.
                </p>
            </section>

            <section>
                <h3 id="gateway">API Gateway</h2>
                    <p>
                        The <strong>API Gateway</strong> acts as the single entry point for all external client
                        requests, which can simplify communication with the underlying microservices as the clients
                        don't need to know the addresses of each service. By routing, aggregating, and translating
                        client requests, the API Gateway abstracts the complexity of the distributed system, which
                        enables clients to easily communicate with the application.
                    </p>
                    <p>
                        Additionally, this approach enables hiding the services within a private network, not making them
                        accessible from the public internet. Multiple API gateways can be used for different clients,
                        meeting their specific needs such as UI for admin and UI for customers.
                    </p>
            </section>



            <section>
                <h2 id="dbperservice">Persistence</h2>
                <h3>Database per service - CQRS pattern</h3>
                <p>
                    In the <strong>Database per Service</strong> approach , each service has exclusive ownership of its
                    own database. This pattern promotes loose coupling by isolating data within a service, which enables
                    it to process it independently without impacting others. Each service can also choose the database
                    technology that best suits its specific requirements.
                </p>
                <p>
                    This approach is aiming for modularity, scalability, and resilience. Patterns like
                    <strong>Saga</strong> can be used to manage distributed transactions and achieve eventual
                    consistency across services when necessary.
                </p>
                <p>
                    One drawback: How to implement a query that retrieves data from multiple services in a microservice
                    architecture without introducing joins over the network? E.g <strong>OrderService</strong> might
                    need to validate incoming requests but needs user data such as <code class="code-inline">role</code>
                    and <code class="code-inline">id</code> for that.
                </p>
                <p>
                    Here a compromise between normalized data models and redundancy is introduced. Normalized models
                    reduce duplication, they tightly couple services. Redundancy and maintaining denormalized models
                    ensures loose coupling at the cost of increased storage and complexity in achieving eventual
                    consistency.
                </p>
                <p>
                    While our <strong>UserService</strong> is the owner of it's data, the <strong>OrderService</strong>
                    can store a copy of that as read only data entries, updating it when consuming certain events, like
                    <code class="code-inline">UserUpdatedEvent</code> or <code
                        class="code-inline">UserDeletedEvent</code>.
                </p>
                <p>
                    This approach is also referred to as the Command Query Responsibility Segregation (CQRS) pattern.
                    "Define a view database, which is a read-only ‘replica’ that is designed specifically to support
                    that query, or a group of related queries. The application keeps the database up to date by
                    subscribing to Domain events published by the service that own the data. The type of database and
                    its schema are optimized for the query or queries. It’s often a NoSQL database, such as a document
                    database or a key-value store."
                </p>
            </section>


            <section>
                <h2 id="sagas">Distributed Transactions - Saga Pattern</h2>
                <h3>How to implement transactions that span services</h3>

                <p>
                    By implementing each business transaction that spans multiple services as a so called saga. A saga is a sequence of
                    local transactions. Each local transaction updates the database and publishes a message or event to
                    trigger the next local transaction in the saga. If a local transaction fails because it violates a
                    business rule then the saga executes a series of compensating transactions. These either undo the changes
                    that were made by the preceding local transactions or handle the violation.
                </p>

                <p>
                    There are two ways to coordinate sagas:
                <ul>
                    <li>Choreography - each local transaction publishes domain events that trigger local transactions in
                        other services</li>
                    <li>Orchestration - an orchestrator (object) tells the participants what local transactions to
                        execute</li>
                </ul>

                </p>
                <h3>Payment failed scenario</h3>
                <div class="arch-image">
                    <img src="images/saga-payment-failed.jpg" alt="payment failed">
                </div>
                <p>
                    A <strong>failed payment</strong> in this system follows a choreography-based saga, consisting of
                    the following steps:
                </p>
                <ol>
                    <li>The <strong>Client</strong> sends a <code
                            class="code-inline">POST /cart-products/checkout</code> request
                        to the <strong>ApiGateway</strong>, initiating the checkout process.</li>
                    <li>The <strong>ApiGateway</strong> forwards the request to the <strong>CartService</strong></li>
                    </li>
                    <li>The <strong>CartService</strong> reads the cart data from the <strong>MongoDB cartdb</strong>
                        generates an order id and returns the order id to the <strong>Client</strong> through the
                        <strong>ApiGateway</strong>
                    </li>
                    <li>The <strong>CartService</strong> generates a <code
                            class="code-inline">CheckoutStartedEvent</code> and publishes it through
                        <strong>Kafka</strong>,</li>
                    </li>
                    <li>The <strong>OrderService</strong> consumes the <code
                            class="code-inline">CheckoutStartedEvent</code>, creates an order with a status of
                        <strong>"OPEN"</strong>, saves it to the <strong>MongoDB orderdb</strong>, and emits an <code
                            class="code-inline">OrderCreatedEvent</code>.
                    </li>
                    <li>The <strong>CartService</strong> consumes the <code class="code-inline">OrderCreatedEvent</code>
                        and deletes the corresponding cart from the db, since the order is now pending and the cart is
                        no longer needed</code>.</li>
                    <li>The <strong>PaymentService</strong> consumes the <code
                            class="code-inline">OrderCreatedEvent</code>, validates the payment method, and attempts to
                        process the payment. If the payment fails, it emits a <code
                            class="code-inline">PaymentFailEvent</code>.</li>

                    <p>From here on, compensating transactions are being performed, as suggested by the saga pattern.
                    </p>

                    <li>The <strong>OrderService</strong> consumes the <code
                            class="code-inline">PaymentFailEvent</code>, rejects the order, and updates the order status
                        to <strong>"PAYMENT_FAILED"</strong> in the <strong>MongoDB orderdb</strong>.</li>
                    <li>The <strong>NotificationService</strong> consumes the <code
                            class="code-inline">PaymentFailEvent</code>, queries user data (email and name) from its
                        database, builds an email notification with the payment failure details, and emits a <code
                            class="code-inline">NotificationSentEvent</code>.</li>
                    <li>The <strong>NotificationService</strong> interacts with an <strong>external mail server</strong>
                        to send an email to the user informing them of the payment failure.</li>
                    <li>Throughout the process, the <strong>TrackingService</strong> consumes all relevant events (<code
                            class="code-inline">CheckoutStartedEvent</code>, <code
                            class="code-inline">OrderCreatedEvent</code>, <code
                            class="code-inline">PaymentFailEvent</code>, and <code
                            class="code-inline">NotificationSentEvent</code>) and logs them to the <strong>MongoDB
                            trackingdb</strong> for analytics and auditing purposes.</li>
                </ol>


            </section>

            <section>
                <h2 id="security">Security</h2>
                <h3>JWT Tokens</h3>
                <p>
                    <strong>JWT (JSON Web Tokens)</strong> are used as part of the security strategy to authenticate and
                    authorize users.
                <p>
                    Some API endpoints are only open to admins, while others are open to both customers and admins. When
                    a user logs in or registers, the <strong>AuthService</strong> generates a signed JWT containing
                    user-specific claims. This token is included in subsequent API requests, allowing services to verify
                    the user’s identity and permissions without directly querying the AuthService.
                </p>
                <div class="arch-image">
                    <img src="images/admin-jwt.jpg" alt="admin jwt token">
                </div>
                <p>
                    Example of an admin jwt token.
                <ul>
                    <li><code class="code-inline">iss</code>: Issuer of the token.</li>
                    <li><code class="code-inline">upn</code>: User Principal Name, in our case the e-mail</li>
                    <li><code class="code-inline">groups</code>: The user's roles for role based access control.</li>
                    <li><code class="code-inline">sid</code>: Unique session id</li>
                    <li><code class="code-inline">sub</code>: User id</li>
                    <li><code class="code-inline">email</code>: User e-mail</li>
                    <li><code class="code-inline">exp</code>: Expiration of token</li>
                    <li><code class="code-inline">iat</code>: Issued at</li>
                    <li><code class="code-inline">jti</code>: JWT Id, unique identifier for this token</li>
                </ul>
                </p>
            </section>

            <section>
                <h2 id="hasing">Hashing</h2>
                <h3>Protecting Sensitive Data</h3>
                <p>
                    The system implements <strong>hasing</strong> mechanisms to secure sensitive data, such as user
                    credentials. Hashing is achieved using the <strong>BCrypt algorithm</strong>. Each
                    framework—<strong>Spring Boot</strong>, <strong>Micronaut</strong>, and
                    <strong>Quarkus</strong>—utilizes its native or integrated libraries to provide secure hashing
                    functionality.
                </p>
                <p>
                    <strong>Implementation Details:</strong>
                <ul>
                    <li>
                        <strong>Micronaut:</strong> Utilizes the <code class="code-inline">BCryptPasswordEncoder</code>
                        from Spring Security to hash and verify plaintext data.
                    </li>
                    <li>
                        <strong>Quarkus:</strong> Integrates with <code class="code-inline">BcryptUtil</code>, a native
                        utility designed to leverage Quarkus's cloud-native optimizations.
                    </li>
                    <li>
                        <strong>Spring Boot:</strong> Leverages <code class="code-inline">BCryptPasswordEncoder</code>
                        from the Spring Security ecosystem.
                    </li>
                </ul>
                </p>
                <div class="arch-image">
                    <img src="images/crypt-password.jpg" alt="hashed passwords">
                </div>
                <p>
                    This shows that passwords are being stored as hashed strings.
                </p>
            </section>


            <section>
                <h2 id="monitoring">Monitoring</h2>
                <h3>Tracking Service</h3>
                <p>
                    The <strong>Tracking Service</strong> is a dedicated microservice that enables monitoring and
                    analytics by capturing events and their associated metadata throughout the system. This service
                    consumes events, such as <code class="code-inline">CheckoutStartedEvent</code>, <code
                        class="code-inline">OrderCreatedEvent</code>, and <code
                        class="code-inline">PaymentFailEvent</code>, from Kafka and logs them into the <strong>MongoDB
                        trackingdb</strong>. These events provide a detailed view of the system's operations for
                    real-time and historical analysis.
                </p>
                <p>
                    Each event contains <strong>metadata</strong>, such as:
                <ul>
                    <li><code class="code-inline">userId</code> and <code class="code-inline">userEmail</code>: For
                        identifying which user triggered the event.</li>
                    <li><code class="code-inline">productId</code> and <code class="code-inline">orderId</code>: For
                        tracking specific orders and products involved.</li>
                    <li><code class="code-inline">timestamp</code>: To capture the exact time the event occurred.</li>
                    <li><code class="code-inline">sourceService</code>: To identify which service generated the event,
                        such as <strong>AuthService</strong> or <strong>PaymentService</strong>.</li>
                    <li><code class="code-inline">requestCorrelationId</code>: To enable traceability of requests across
                        multiple services.</li>
                    <li><code class="code-inline">sessionId</code>: To link events to a specific user session.</li>
                </ul>
                </p>

                <p>
                    The tracking api provides search and filter capabilities using the metadata.
                </p>
                <div class="arch-image">
                    <img src="images/tracking-output-example.jpg" alt="tracking output example">
                </div>
                <p>
                    The image shows the output by quering for specific sessions in ascending time of occurance. In one
                    session the buying process
                    completed successfully and in another session the payment failed. The timestamps show how long it
                    took
                    to propagate the data and complete the process from the moment it was initialized to when it
                    finished.
                </p>
            </section>

            <section>
                <h2 id="codegen">Code Generation - OpenApi</h2>
                <h3>Contract first appraoch</h3>
                <p>
                    The <strong>Contract-First Approach</strong> ensures that the design of our APIs is standardized,
                    well-documented, and agreed upon before any code is written. In our implementation, this approach
                    involves defining service APIs using <strong>OpenAPI specifications</strong>, which act as a
                    contract between the service providers and consumers.
                </p>
                <p>
                    The API server code for each microservice is generated directly from the OpenAPI specification.

                <p>
                    On the <strong>API Gateway</strong>, REST clients are also generated from the same OpenAPI
                    specifications.
                </p>
                <p>
                    This was adapted in the frameworks <strong>Spring Boot</strong>,
                    <strong>Micronaut</strong>, and <strong>Quarkus</strong> using openapi codegen plugins.
                </p>
                <p>
                    By automating server and client code generation, development is highly accelerated.
                </p>
            </section>


        </main>
    </div>
</body>

</html>